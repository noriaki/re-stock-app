# Re-Stock アプリのUI開発ガイドライン

## 基本方針

Re-Stock アプリのUI開発においては、以下の基本方針に従います：

- Next.jsのAppルーターを基本フレームワークとして使用
- TypeScriptによる型安全な実装
- Tailwind CSSとshadcn/uiを活用したデザインシステム
- レスポンシブデザインとアクセシビリティの確保

## コンポーネント設計

### 基本構造

1. **コンポーネント分類**:
   - ページコンポーネント（app/ディレクトリ内）
   - 再利用可能なUIコンポーネント（components/ui/）
   - 機能コンポーネント（components/features/）
   - レイアウトコンポーネント（components/layouts/）

### UIコンポーネント (components/ui/)

- shadcn/uiをベースとした再利用可能なコンポーネント
- プレゼンテーショナルコンポーネントとして実装
- ドメイン知識を含まない
- Propsを通じてデータと振る舞いを受け取る

### 機能コンポーネント (components/features/)

- 特定の機能やユースケースに関連するコンポーネント
- UIコンポーネントを組み合わせて構成
- 状態管理と連携
- ドメインロジックは直接含まず、アプリケーションレイヤーを通じて利用

### コンポーネント構造

- 関数コンポーネントを使用する
- 小さく、単一責任の原則に従ったコンポーネントを作成する
- 複雑なロジックはカスタムフックに抽出する
- メモ化（React.memo, useMemo, useCallback）を適切に使用する

## スタイリングガイド

### Tailwind CSS

- ユーティリティクラスを基本とする
- 変数ベースの色（`bg-primary`, `text-primary-foreground`など）を使用
- 命名クラスよりもユーティリティクラスを優先
- カスタムクラスは必要最小限にとどめる

### shadcn/ui

- 基本的なUIコンポーネントは可能な限りshadcn/uiを利用
- 必要に応じてカスタマイズする場合も、Tailwindの原則を維持
- カラースキームの一貫性を保つ

## アクセシビリティ対応

### セマンティックHTML

- 適切なHTML要素を使用（article, section, main, nav, header, footerなど）
- 見出しの階層（h1～h6）を適切に維持
- landmarkロールを活用

### ARIA属性

- 必要に応じてaria-*属性を設定
- aria-labelやaria-describedbyでコンテキストを提供
- WAI-ARIAのベストプラクティスに従う

### フォーカス管理

- キーボードナビゲーションをサポート
- フォーカスインジケータを視覚的に明確に
- focus-visibleユーティリティの活用

### スクリーンリーダー対応

- sr-onlyクラスを使用して視覚的に隠された説明テキストを提供
- 画像には適切なalt属性を設定
- アイコンやシンボルに意味がある場合は適切なテキスト代替を提供

## データ表示とフォーム

### データ表示

- データ表示は明確で読みやすく
- 適切なフォーマットとグループ化
- スケルトンローダーを用いた読み込み状態の表示
- エラー状態の適切な処理と表示

### フォーム実装

- バリデーションと適切なエラーメッセージ
- アクセシブルなラベル付け
- 入力ヘルパーテキストの提供
- フォームの状態（送信中、成功、エラー）を視覚的に表示

### 検索とフィルタリング

- 直感的なUI
- インクリメンタル検索の実装
- フィルター条件の視覚的な表示
- クリアと初期状態へのリセット機能

## レスポンシブデザイン

- モバイルファーストアプローチ
- Tailwindの修飾子（sm:, md:, lg:, xl:）を活用
- flexboxとgridレイアウトを適切に使用
- メディアクエリは極力避け、Tailwindの修飾子で対応
- タッチインターフェースの最適化

## パフォーマンス最適化

### レンダリング最適化

- 不要な再レンダリングを避ける（memo, useCallback, useMemo）
- 大きなリストには仮想化を検討
- Code SplittingとLazy Loadingを活用

### 画像最適化

- Next.js Imageコンポーネントを使用
- 適切なサイズとフォーマットを指定
- loading="lazy"属性の活用

### バンドルサイズ最適化

- トリーシェイキングが効くように注意
- 重いライブラリは必要な部分だけをインポート
- 非同期インポートと遅延読み込みを検討
